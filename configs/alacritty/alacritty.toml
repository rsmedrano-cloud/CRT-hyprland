# Inspired by JaKooLit, Retroed by Non-Sense Nostalgia
# CRT Phosphor Green - Alacritty Terminal Configuration
# 
# Alacritty is a GPU-accelerated terminal but doesn't have built-in CRT shaders.
# This config maximizes the retro aesthetic within Alacritty's capabilities.

[general]
# Import the color scheme
import = ["~/.config/alacritty/themes/crt-phosphor.toml"]

[shell]
program = "/bin/zsh"

[env]
TERM = "alacritty"

[window]
# Window dimensions
dimensions = { columns = 100, lines = 30 }

# Window padding for CRT screen edge feel
padding = { x = 12, y = 12 }

# Spread additional padding evenly around the terminal content
dynamic_padding = true

# Window decorations
decorations = "full"

# Slight transparency for that CRT glass effect
opacity = 0.92

# Blur (if supported by compositor)
blur = true

# Window title
title = "CRT Terminal"
dynamic_title = true

# Window class
class = { instance = "Alacritty", general = "Alacritty" }

[scrolling]
# Maximum lines in the scrollback buffer
history = 10000

# Scrolling speed multiplier
multiplier = 3

[font]
# Primary font - Terminus/Terminess for bitmap aesthetic
normal = { family = "Terminess Nerd Font Mono", style = "Regular" }
bold = { family = "Terminess Nerd Font Mono", style = "Bold" }
italic = { family = "Terminess Nerd Font Mono", style = "Italic" }
bold_italic = { family = "Terminess Nerd Font Mono", style = "Bold Italic" }

# Font size
size = 14.0

# Offset is extra spacing around each character
offset = { x = 0, y = 1 }

# Glyph offset for positioning
glyph_offset = { x = 0, y = 0 }

# Use built-in font rendering (provides slight subpixel effect)
builtin_box_drawing = true

[cursor]
# CRT-style block cursor
style = { shape = "Block", blinking = "On" }

# Cursor blink interval in milliseconds
blink_interval = 500

# Unfocused cursor style (hollow block for visibility)
unfocused_hollow = true

# Cursor blink timeout (0 = never stop blinking)
blink_timeout = 0

[terminal]
# Shell integration for OSC sequences
osc52 = "CopyPaste"

[mouse]
# Hide cursor when typing (like old terminals)
hide_when_typing = true

[selection]
# Characters that are considered part of a word for double-click selection
semantic_escape_chars = ",│`|:\"' ()[]{}<>\\t"

# Save selection to clipboard
save_to_clipboard = true

[hints]
# Regex for detecting URLs
enabled = [
    { regex = "(mailto:|gemini:|gopher:|https:|http:|news:|file:|git:|ssh:|ftp:)[^\\u0000-\\u001F\\u007F-\\u009F<>\"\\s{-}\\^⟨⟩`]+", hyperlinks = true, command = "xdg-open", post_processing = true, persist = false, mouse = { enabled = true, mods = "None" }, binding = { key = "U", mods = "Control|Shift" } }
]

[keyboard]
# Key bindings for vi mode and convenience
bindings = [
    # Spawn new instance
    { key = "N", mods = "Control|Shift", action = "SpawnNewInstance" },
    
    # Scroll
    { key = "PageUp", mods = "Shift", action = "ScrollPageUp" },
    { key = "PageDown", mods = "Shift", action = "ScrollPageDown" },
    { key = "Home", mods = "Shift", action = "ScrollToTop" },
    { key = "End", mods = "Shift", action = "ScrollToBottom" },
    
    # Search
    { key = "F", mods = "Control|Shift", action = "SearchForward" },
    { key = "B", mods = "Control|Shift", action = "SearchBackward" },
    
    # Vi mode
    { key = "Space", mods = "Shift|Control", action = "ToggleViMode" },
    
    # Font size
    { key = "Plus", mods = "Control", action = "IncreaseFontSize" },
    { key = "Minus", mods = "Control", action = "DecreaseFontSize" },
    { key = "Key0", mods = "Control", action = "ResetFontSize" },
]
